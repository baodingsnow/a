# okhttp

## get请求

1 . 拿到OkHttpClient对象

2 . 构造Request对象





# httpCilent工具包实现文件下载功能以及将文件流返回至浏览器

首先  获取工具包实体

```java
        HttpClient httpclient = HttpClients.createDefault();

```

然后获取get请求

```java
            HttpGet httpGet = new HttpGet(apiUrl);
//apiUrl 是下载路径
```

获取响应内容(执行请求)

这里做的比较不一样的是 ，没有将文件下载到本地

```java
  HttpResponse response = httpclient.execute(httpGet);
/**获取实体*/
HttpEntity entity = response.getEntity();

//返回输出流
   return entity.getContent();


//到这里已经将文件 下载了

//还需要的是将输出流返回到客户端    方法需要传入参数HttpServletResponse response   后续用respose返回输出流
   // 清空response
            response.reset();
            // 设置response的Header
            response.setCharacterEncoding("UTF-8");
            //Content-Disposition的作用：告知浏览器以何种方式显示响应返回的文件，用浏览器打开还是以附件的形式下载到本地保存
            //attachment表示以附件方式下载   inline表示在线打开   "Content-Disposition: inline; filename=文件名.mp3"
            // filename表示文件的默认名称，因为网络传输只支持URL编码的相关支付，因此需要将文件名URL编码后进行传输,前端收到后需要反编码才能获取到真正的名称
            response.addHeader("Content-Disposition", "attachment;filename=" + URLEncoder.encode(fileName, "UTF-8"));
            // 告知浏览器文件的大小
//            response.addHeader("Content-Length", "" + file.length());
            outputStream = response.getOutputStream();
      response.setContentType("application/octet-stream");
            byte[] b = new byte[1024];
            int len;
            //从输入流中读取一定数量的字节，并将其存储在缓冲区字节数组中，读到末尾返回-1
            while ((len = inputStream.read(b)) > 0) {
                outputStream.write(b, 0, len);
            }
```



# 删除功能  *发送http delete请求*  

 

首先获取响应实体